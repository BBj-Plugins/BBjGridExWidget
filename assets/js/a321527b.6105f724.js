"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[193],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>p});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=i.createContext({}),u=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=u(e.components);return i.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),m=u(t),p=r,g=m["".concat(s,".").concat(p)]||m[p]||c[p]||o;return t?i.createElement(g,l(l({ref:n},d),{},{components:t})):i.createElement(g,l({ref:n},d))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=m;var a={};for(var s in n)hasOwnProperty.call(n,s)&&(a[s]=n[s]);a.originalType=e,a.mdxType="string"==typeof e?e:r,l[1]=a;for(var u=2;u<o;u++)l[u]=t[u];return i.createElement.apply(null,l)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},707:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var i=t(7462),r=(t(7294),t(3905));const o={sidebar_position:2,title:"Columns Interface"},l=void 0,a={unversionedId:"api/columns-interface",id:"api/columns-interface",title:"Columns Interface",description:"Your application interacts with columns through the grid's column interface. The column interface is defined as all the public facing parts of the columns that your application interacts with.",source:"@site/docs/api/columns-interface.md",sourceDirName:"api",slug:"/api/columns-interface",permalink:"/BBjGridExWidget/docs/api/columns-interface",draft:!1,editUrl:"https://github.com/BBj-Plugins/BBjGridExWidget/tree/dev/website/docs/api/columns-interface.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Columns Interface"},sidebar:"tutorialSidebar",previous:{title:"Grid Interface",permalink:"/BBjGridExWidget/docs/api/grid-interface"},next:{title:"Columns",permalink:"/BBjGridExWidget/docs/category/columns"}},s={},u=[{value:"Column Properties",id:"column-properties",level:2},{value:"Avoid Duplication Of Column Definitions",id:"avoid-duplication-of-column-definitions",level:2},{value:"Column Types",id:"column-types",level:2},{value:"Saving and Restoring Column State",id:"saving-and-restoring-column-state",level:2},{value:"Column Changes",id:"column-changes",level:2}],d={toc:u};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Your application interacts with columns through the grid's column interface. The column interface is defined as all the public facing parts of the columns that your application interacts with. "),(0,r.kt)("p",null,"The column interface is the combination of the following items:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/GxColumns/GxDefaultColumnDefinition.html"},"Column Properties"),": Columns are configured through the ",(0,r.kt)("a",{parentName:"li",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/GxColumns/GxColumn.html"},"GxColumn Object"),". A column object contains the columns properties. e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"width")," , ",(0,r.kt)("inlineCode",{parentName:"li"},"height"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/BBjGridExWidget/BBjGridExWidget.html"},"Column API"),": The column API is similar to the grid API and they are accessibly directly from the BBjGridExWidget class, the difference is that the column API provides methods relevant to columns e.g.. for instance ",(0,r.kt)("inlineCode",{parentName:"li"},'BBjGridExWidget.ensureColumnVisible("country")'),".")),(0,r.kt)("h2",{id:"column-properties"},"Column Properties"),(0,r.kt)("p",null,"Each column in the grid is defined using a column definition. Columns are positioned in the grid according to the order defined in the ResultSet or the order of insertion. The following example shows a simple grid with 4 columns defined:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers showLineNumbers",showLineNumbers:!0},'use ::BBjGridExWidget/BBjGridExWidget.bbj::BBjGridExWidget\nuse com.basiscomponents.db.ResultSet\nuse com.basiscomponents.bc.SqlQueryBC\n\ndeclare auto BBjTopLevelWindow wnd!\nwnd! = BBjAPI().openSysGui("X0").addWindow(10,10,800,600,"Columns Interface Demo")\nwnd!.setCallback(BBjAPI.ON_CLOSE,"byebye")\n\ngosub main\nprocess_events\n\nmain:\n  declare SqlQueryBC sbc!\n  declare ResultSet rs!\n  declare BBjGridExWidget grid!\n\n  sbc! = new SqlQueryBC(BBjAPI().getJDBCConnection("CDStore"))\n  rs! = sbc!.retrieve("SELECT  CDNUMBER , ARTIST, TITLE, LABEL FROM CDINVENTORY")\n\n  grid! = new BBjGridExWidget(wnd!,100,0,0,800,600)\n\n  grid!.addColumn("CDNUMBER","Item#")\n  grid!.addColumn("ARTIST","Artist Name")\n  grid!.addColumn("TITLE","Record Title")\n  grid!.addColumn("LABEL","Publisher")\n\n  grid!.setData(rs!)\nreturn\n\nbyebye:\nbye\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"See ",(0,r.kt)("a",{parentName:"p",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/GxColumns/GxDefaultColumnDefinition.html"},"GxDefaultColumnDefinition")," for a list of all properties that can be applied to a column.")),(0,r.kt)("h2",{id:"avoid-duplication-of-column-definitions"},"Avoid Duplication Of Column Definitions"),(0,r.kt)("p",null,"The grid provides additional ways to help simplify and avoid duplication of column definitions. This is done through the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/GxColumns/GxDefaultColumnDefinition.html"},"GxDefaultColumnDefinition")," : contains column properties all columns will inherit."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://bbj-plugins.github.io/BBjGridExWidget/javadoc/GxColumns/GxDefaultColumnGroup.html"},"GxDefaultColumnGroup")," : contains column group properties all column groups will inherit.")),(0,r.kt)("p",null,"The following code snippet shows to set the width of all columns:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers showLineNumbers",showLineNumbers:!0},'use ::BBjGridExWidget/BBjGridExWidget.bbj::BBjGridExWidget\nuse com.basiscomponents.db.ResultSet\nuse com.basiscomponents.bc.SqlQueryBC\n\ndeclare auto BBjTopLevelWindow wnd!\nwnd! = BBjAPI().openSysGui("X0").addWindow(10,10,800,600,"Columns Interface Demo")\nwnd!.setCallback(BBjAPI.ON_CLOSE,"byebye")\n\ngosub main\nprocess_events\n\nmain:\n  declare SqlQueryBC sbc!\n  declare ResultSet rs!\n  declare BBjGridExWidget grid!\n\n  sbc! = new SqlQueryBC(BBjAPI().getJDBCConnection("CDStore"))\n  rs! = sbc!.retrieve("SELECT  CDNUMBER, ARTIST, TITLE, LABEL, PLAYINGTIME FROM CDINVENTORY")\n\n  grid! = new BBjGridExWidget(wnd!,100,0,0,800,600)\n  grid!.setData(rs!)\n\n  grid!.getOptions().getDefaultColumnDefinition().setWidth(150)\nreturn\n\nbyebye:\nbye\n')),(0,r.kt)("h2",{id:"column-types"},"Column Types"),(0,r.kt)("p",null,"The grid respects the column type ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/JetBrains/jdk8u_jdk/blob/master/src/share/classes/java/sql/Types.java"},"(SQL TYPE)")," defined in the DateRow. each column type will have the correct editors , filters and cell renderers.\nBy default you do not need to define the column type , the grid will do this automatically but uou change the\ncolumn type by calling ",(0,r.kt)("inlineCode",{parentName:"p"},"GxColumn.setType(BBjNumber type!)")," method on the column"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers showLineNumbers",showLineNumbers:!0},'use ::BBjGridExWidget/GxColumns.bbj::GxColumn\n\ndeclare GxColumn column!\ncolumn! = grid!.getColumn("CDNUMBER")\n\nrem be aware that this will recreate all the column components(filters, cell editors, ...)\ncolumn!.setType(java.sql.Types.NUMERIC)\n')),(0,r.kt)("p",null,"You can also just create a new column and add it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers showLineNumbers",showLineNumbers:!0},'declare GxColumn column!\ncolumn! = new GxColumn("CDNUMBER", "My Column Title", java.sql.Types.NUMERIC)\n\ngrid!.addColumn(column!)\n')),(0,r.kt)("h2",{id:"saving-and-restoring-column-state"},"Saving and Restoring Column State"),(0,r.kt)("p",null,"It is possible to save and subsequently restore the column state via the Column API. Examples of state include column visibility, width, row groups and values."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To save the state use : ",(0,r.kt)("inlineCode",{parentName:"li"},"BBjGridExWidget::setState(::BBjGridExWidget/GxState.bbj::GxState state!)")),(0,r.kt)("li",{parentName:"ul"},"To Get the state use : ",(0,r.kt)("inlineCode",{parentName:"li"},"BBjGridExWidget::.getState():"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers showLineNumbers",showLineNumbers:!0},'use ::BBjGridExWidget/BBjGridExWidget.bbj::BBjGridExWidget\nuse ::BBjGridExWidget/GxState.bbj::GxState\nuse com.basiscomponents.bc.SqlQueryBC\nuse com.basiscomponents.db.ResultSet\nuse com.google.gson.JsonObject\nuse java.sql.Types\n\ndeclare auto BBjTopLevelWindow wnd!\ndeclare BBjGridExWidget grid!\n\nwnd! = BBjAPI().openSysGui("X0").addWindow(10,10,800,600,"Column State Demo")\nwnd!.setCallback(BBjAPI.ON_CLOSE,"byebye")\n\ntb_get! = wnd!.addButton(300,2,3,200,25,"Save current State")\ntb_get!.setEnabled(0)\ntb_get!.setCallback(BBjAPI.ON_BUTTON_PUSH,"getState")\n\ntb_set! = wnd!.addButton(301,230,3,200,25,"Restore State")\ntb_set!.setEnabled(0)\ntb_set!.setCallback(BBjAPI.ON_BUTTON_PUSH,"setState")\n\ntb_refresh! = wnd!.addButton(302,450,3,200,25,"Refresh")\ntb_refresh!.setCallback(BBjAPI.ON_BUTTON_PUSH,"refresh")\n\ngrid! = new BBjGridExWidget(wnd!,100,0,30,800,570)\ngrid!.setCallback(grid!.ON_GRID_COLUMN_STATE_CHANGE(),"onColumnStateChange")\n\ngosub fillGrid\nprocess_events\n\nfillGrid:\n  declare SqlQueryBC sbc!\n  declare ResultSet rs!\n  declare BBjGridExWidget grid!\n\n  sbc! = new SqlQueryBC(BBjAPI().getJDBCConnection("CDStore"))\n  rs! = sbc!.retrieve("SELECT  CDNUMBER , ARTIST, TITLE, LABEL, PLAYINGTIME FROM CDINVENTORY")\n\n  grid!.setData(rs!)\nreturn\n\ngetState:\n  // highlight-next-line\n  state! = grid!.getState()\n  clipfromstr 1,state!.toString()\nreturn\n\nsetState:\n  tb_get!.setEnabled(0)\n  if state!<>null() then\n      // highlight-next-line\n      grid!.setState(state!)\n  FI\nreturn\n\nonColumnStateChange:\n    tb_get!.setEnabled(1)\n    tb_set!.setEnabled(1)\nreturn\n\nrefresh:\n    grid!.render()\nreturn\n\nbyebye:\nbye\n')),(0,r.kt)("h2",{id:"column-changes"},"Column Changes"),(0,r.kt)("p",null,"It is possible to add and remove columns after the grid is created. This is done by calling ",(0,r.kt)("inlineCode",{parentName:"p"},"BBjGridExWidget.updateColumns()"),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"BBjGridExWidget.updateColumns()")," collects the new changes in columns and column groups and force the client to reflect the change.")),(0,r.kt)("p",null,"When new columns are set, the grid will compare with current columns and work out which columns are old (to be removed), new (new columns created) or kept (columns that remain will keep their state including position, filter and sort)."),(0,r.kt)("p",null,"Comparison of column definitions is done on based on the column ID/Field."),(0,r.kt)("p",null,"If the column ID matches, then the grid treats the columns as the same column. For example if the grid has a column with ID ",(0,r.kt)("inlineCode",{parentName:"p"},"country")," and the user sets new columns, one of which also has ID of ",(0,r.kt)("inlineCode",{parentName:"p"},"country"),", then the old country column is kept in place of the new one keeping it's internal state such as width, position, sort and filter."),(0,r.kt)("p",null,"The following is an example showing how to update column properties and forcing the client to reflect the changes\nusing ",(0,r.kt)("inlineCode",{parentName:"p"},"updateColumn")," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bbj",metastring:"showLineNumbers",showLineNumbers:!0},'use ::BBjGridExWidget/BBjGridExWidget.bbj::BBjGridExWidget\nuse ::BBjGridExWidget/GxColumns.bbj::GxColumn\nuse com.basiscomponents.db.ResultSet\nuse com.basiscomponents.bc.SqlQueryBC\n\ndeclare auto BBjTopLevelWindow wnd!\ndeclare BBjGridExWidget grid!\n\nwnd! = BBjAPI().openSysGui("X0").addWindow(10,10,800,600,"Column Update Demo")\nwnd!.setCallback(BBjAPI.ON_CLOSE,"byebye")\n\nonCDNumberUpdate! = wnd!.addButton(200,10,10,150,25,"Update CDNUMBER")\nonCDNumberUpdate!.setCallback(BBjAPI.ON_BUTTON_PUSH,"onCDNumberUpdate")\n\ngosub main\nprocess_events\n\nmain:\n  declare SqlQueryBC sbc!\n  declare ResultSet rs!\n  declare BBjGridExWidget grid!\n\n  sbc! = new SqlQueryBC(BBjAPI().getJDBCConnection("CDStore"))\n  rs! = sbc!.retrieve("SELECT CDNUMBER , TITLE , MUSICTYPE FROM CDINVENTORY")\n\n  grid! = new BBjGridExWidget(wnd!,100,0,50,800,550)\n  grid!.setData(rs!)\nreturn\n\nonCDNumberUpdate:\n    declare GxColumn column!\n\n    column! = grid!.getColumn("CDNUMBER")\n    column!.setWidth(150)\n    column!.setPinned(GxColumn.PINNED_LEFT())\n\n    // highlight-next-line\n    grid!.updateColumns()\nreturn\n\nbyebye:\nbye\n')))}c.isMDXComponent=!0}}]);